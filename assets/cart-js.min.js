(()=>{"use strict";document.querySelectorAll(".qp-js input").forEach((e=>{e.addEventListener("change",(function(){const e=this.dataset.value,t=this.value,r=function(e,t){for(;(e=e.parentElement)&&!(e.matches||e.matchesSelector).call(e,t););return e}(this,".cart-item");this.parentNode.classList.add("loading");const a=this.dataset.id,i=this.dataset.price,o=this.dataset.size;if(Number(t)>10){return r.querySelector(".error-placeholder").innerHTML=document.querySelector(".minicart-wrapper")?.dataset?.limitmsg,this.value=10,void this.parentNode.classList.remove("loading")}Number(e)<Number(t)?fetch("/cart/add.js",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:`id=${a}&quantity=1`}).then((e=>e.json())).then((t=>{if(422===t.status){if(r){r.querySelector(".error-placeholder").innerHTML=t.description}this.value=e}else jQuery.getJSON("/cart.js",(function(e){for(var t=[],r=0;r<e.items.length;r++){var n={productId:e.items[r].id,quantity:e.items[r].quantity,itemPrice:(e.items[r].final_line_price/100).toFixed(2)};t.push(n)}var s=parseInt(i).toFixed(2);DY.API("event",{name:"Add to Cart",properties:{dyType:"add-to-cart-v1",value:s,currency:"USD",productId:a,quantity:1,size:o,cart:t}})})),this.dataset.value=this.value;window.location.reload(),this.parentNode.classList.remove("loading")})).catch((e=>{console.error("Error:",e)})):(console.log("change"),fetch("/cart/change.js",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`quantity=${t}&id=${a}`}).then((e=>e.json())).then((e=>{const t=e.items.find((e=>e.id==a));t&&(t.quantity<=0&&window.location.reload(),this.value=t.quantity),window.location.reload(),this.parentNode.classList.remove("loading")})).catch((e=>{this.parentNode.classList.remove("loading"),console.error("Error:",e)})))}))}))})();